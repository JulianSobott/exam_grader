{% extends 'layout.html' %}

{% from 'submission.html' import build_submission_report %}

{% macro build_report_all(report) -%}
    <div class="report">
        <div class="header-info" onclick="expand(this)">
            <div class="header-element">generated: {{ report.time_end }}</div>
            <div class="header-element">evaluated: {{ report.num_submissions }}</div>
            <div class="header-element">passed: {{ report.num_passed }}</div>
            {% for taskname, num in report.failed_tasks.items() %}
            <div class="header-element">failed_{{ taskname }}: {{ num}}</div>
            {% endfor %}
            <div class="header-element">passed: {{ report.num_passed }}</div>
            <div class="header-element">
                <label for="cb-show-graduation">Show graduation: </label>
                <input type="checkbox" id="cb-show-graduation" checked onclick="toggleGraduationVisibility(event, this)">
            </div>
        </div>
        <div class="expandable-container">
            {% for submission in report.submissions %}
                {{ build_submission_report(submission) }}
            {% endfor %}
        </div>
    </div>
    <div class="tools">
        <button onclick="collapse_all()">Collapse all</button>
        <button onclick="onSubmitGradingsClick(this, event)">Submit gradings to server</button>
        <button onclick="onLoadGradingsClick(this, event)">load gradings</button>
        <button onclick="startCopying()">Start copying</button>
    </div>
{%- endmacro -%}


{% block content %}
    {{ build_report_all(report) }}
{% endblock %}
