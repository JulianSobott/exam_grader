
{% macro build_testcase(testcase) -%}
{% set passed_class = "passed" if testcase.passed else "failed" %}
{% set testsuite_id = testcase.submission_name + "--" + testcase.testsuite_name  %}
{% set testcase_id = testsuite_id + "--" + testcase.name  %}
<div class="testcase container-{{ passed_class }} testcase-{{ testsuite_id }}"
     id="testcase-{{ testcase_id }}">
    <div class="header-info" onclick="expand(this)">
        <div class="header-element name {{ passed_class }}" id="testcase-name-{{ testcase_id }}">{{ testcase.name }}</div>
    </div>

    <div class="graduation testcase-graduation testcase-graduation-{{ testsuite_id }}" id="graduation-{{ testcase_id }}">
        <label class="graduation-label row">
            Points:
            <input class="graduation-points" id="points-{{ testcase_id }}" type="number" step="0.5" value="{{ testcase.auto_points }}" min="0" max="{{ testcase.max_points }}">
            /
            <input class="graduation-points" id="max_points-{{ testcase_id }}" type="number" value="{{ testcase.max_points }}" disabled>
        </label>

        <label class="graduation-label" for="comment-{{ testcase_id }}">Comment:</label>
        <textarea class="graduation-comment" id="comment-{{ testcase_id }}" name="comment"
                  cols="100" rows="1" onclick="checkEnlarge(this)" oninput="checkEnlarge(this)"></textarea>
    </div>

    <div class="testcase-details expandable-container manual">
        {% for snippet in testcase.code_snippets %}

            <div class="row">
                <div class="header-info">
                    <div>{{ snippet.class_name }} - {{ snippet.name }}</div>
                </div>
                <div class="header-info">Status: {{ snippet.code_status }}</div>
            </div>
            <pre class="code-snippet"><code class="language-java">{{ snippet.code }}</code></pre>
            {% if not testcase.passed %}
                <pre class="testcase-stack">{{ testcase.stack }}</pre>
            {% endif %}
        {% endfor %}

    </div>
</div>
{%- endmacro -%}
